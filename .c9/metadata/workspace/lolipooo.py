{"changed":true,"filter":false,"title":"lolipooo.py","tooltip":"/lolipooo.py","value":"# -*- coding: utf-8 -*-\n\nimport re\nimport parse\n\n\"\"\"Robot-joueur de Pooo\n    \n    Le module fournit les fonctions suivantes :\n        register_pooo(uid)\n        init_pooo(init_string)\n        play_pooo()\n        \n\"\"\"\n\n__version__='0.1'\n \n## chargement de l'interface de communication avec le serveur\n#from poooc import order, state, state_on_update, etime\n\n# mieux que des print partout\nimport logging\n# pour faire de l'introspection\nimport inspect\n\ndef register_pooo(uid):\n    \"\"\"Inscrit un joueur et initialise le robot pour la compétition\n        :param uid: identifiant utilisateur\n        :type uid:  chaîne de caractères str(UUID) \n        \n        :Example:\n        \"0947e717-02a1-4d83-9470-a941b6e8ed07\"\n    \"\"\"\n    pass\n\n\ndef init_pooo(init_string):\n    \n    p = re.compile('INIT([A-z0-9-]*)TO(.*)\\[(.*)\\];(.);(\\d+)CELLS:(.*);(\\d+)LINES:(.*)')\n    test_str = \"INIT20ac18ab-6d18-450e-94af-bee53fdc8fcaTO6[2];1;3CELLS:1(23,9)'2'30'8'I,2(41,55)'1'30'8'II,3(23,103)'1'20'5'I;2LINES:1@3433OF2,1@6502OF3\"\n \n    res = re.search(p, test_str)\n    groups = res.groups()\n    \n    \"\"\"\n    Groups :\n    0 : matchid\n    1 : #players\n    2 : my player number\n    3 : speed\n    4 : #cells\n    5 : cell data\n    6 : #lines\n    7 : line data\n    \"\"\"\n    gameData = {\n        'matchid':groups[0],\n        'playerNb':int(groups[1]),\n        'myId':int(groups[2]),\n        'speed':int(groups[3]),\n        'cellNb':int(groups[4]),\n        'cellData':parse.parseCells(groups[5]),\n        'lineNb':int(groups[6]),\n        'lineData':parse.parseLines(groups[7])\n    }\n    \n    print(gameData)\n    \n    \"\"\"Initialise le robot pour un match\n        :param init_string: instruction du protocole de communication de Pooo (voire ci-dessous)\n        :type init_string: chaîne de caractères (utf-8 string)\n       \n       INIT<matchid>TO<#players>[<me>];<speed>;\\\n       <#cells>CELLS:<cellid>(<x>,<y>)'<radius>'<offsize>'<defsize>'<prod>,...;\\\n       <#lines>LINES:<cellid>@<dist>OF<cellid>,...\n\n       <me> et <owner> désignent des numéros de 'couleur' attribués aux joueurs. La couleur 0 est le neutre.\n       le neutre n'est pas compté dans l'effectif de joueurs (<#players>).\n       '...' signifie que l'on répète la séquence précédente autant de fois qu'il y a de cellules (ou d'arêtes).\n       0CELLS ou 0LINES sont des cas particuliers sans suffixe.\n       <dist> est la distance qui sépare 2 cellules, exprimée en... millisecondes !\n       /!\\ attention: un match à vitesse x2 réduit de moitié le temps effectif de trajet d'une cellule à l'autre par rapport à l'indication <dist>.\n       De manière générale temps_de_trajet=<dist>/vitesse (division entière).\n        \n        :Example:\n        \"INIT20ac18ab-6d18-450e-94af-bee53fdc8fcaTO6[2];1;3CELLS:1(23,9)'2'30'8'I,2(41,55)'1'30'8'II,3(23,103)'1'20'5'I;2LINES:1@3433OF2,1@6502OF3\"\n    \"\"\"\n    pass\n\n    \ndef play_pooo():\n    \"\"\"Active le robot-joueur\n    \"\"\"\n    logging.info('Entering play_pooo fonction from {} module...'.format(inspect.currentframe().f_back.f_code.co_filename))\n    ### Début stratégie joueur ### \n    # séquence type :\n    # (1) récupère l'état initial \n    # init_state = state()\n    # (2) TODO: traitement de init_state\n    # (3) while True :\n    # (4)     state = state_on_update()    \n    # (5)     TODO: traitement de state et transmission d'ordres order(msg)\n    pass\n    \n    \n    \ninit_pooo(\"\")\nprint(parse.analyzeState(\"STATE20ac18ab-6d18-450e-94af-bee53fdc8fcaIS2;3CELLS:1[2]12'4,2[2]15'2,3[1]33'6;4MOVES:1<5[2]@232'>6[2]@488'>3[1]@4330'2,1<10[1]@2241'3\"))\n","undoManager":{"mark":92,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":71,"column":19},"end":{"row":71,"column":20},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":71,"column":20},"end":{"row":71,"column":21},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":71,"column":21},"end":{"row":71,"column":22},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":71,"column":22},"end":{"row":71,"column":23},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":71,"column":23},"end":{"row":71,"column":24},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":71,"column":19},"end":{"row":71,"column":24},"action":"remove","lines":["parse"]},{"start":{"row":71,"column":19},"end":{"row":71,"column":31},"action":"insert","lines":["parseLines()"]}]}],[{"group":"doc","deltas":[{"start":{"row":71,"column":30},"end":{"row":71,"column":31},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":71,"column":39},"end":{"row":71,"column":40},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":17},"end":{"row":70,"column":18},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":18},"end":{"row":70,"column":19},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":19},"end":{"row":70,"column":20},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":20},"end":{"row":70,"column":21},"action":"insert","lines":["s"]},{"start":{"row":70,"column":21},"end":{"row":70,"column":22},"action":"insert","lines":["q"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":21},"end":{"row":70,"column":22},"action":"remove","lines":["q"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":21},"end":{"row":70,"column":22},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":22},"end":{"row":70,"column":23},"action":"insert","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":22},"end":{"row":70,"column":23},"action":"remove","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":21},"end":{"row":70,"column":22},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":20},"end":{"row":70,"column":21},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":19},"end":{"row":70,"column":20},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":18},"end":{"row":70,"column":19},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":17},"end":{"row":70,"column":18},"action":"remove","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":17},"end":{"row":70,"column":18},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":18},"end":{"row":70,"column":19},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":19},"end":{"row":70,"column":20},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":20},"end":{"row":70,"column":21},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":30},"end":{"row":70,"column":31},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":17},"end":{"row":68,"column":18},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":18},"end":{"row":68,"column":19},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":19},"end":{"row":68,"column":20},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":20},"end":{"row":68,"column":21},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":30},"end":{"row":68,"column":31},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":67,"column":16},"end":{"row":67,"column":17},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":67,"column":17},"end":{"row":67,"column":18},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":67,"column":18},"end":{"row":67,"column":19},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":67,"column":19},"end":{"row":67,"column":20},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":67,"column":29},"end":{"row":67,"column":30},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":66,"column":15},"end":{"row":66,"column":16},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":66,"column":16},"end":{"row":66,"column":17},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":66,"column":17},"end":{"row":66,"column":18},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":66,"column":18},"end":{"row":66,"column":19},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":66,"column":28},"end":{"row":66,"column":29},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":19},"end":{"row":65,"column":20},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":20},"end":{"row":65,"column":21},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":21},"end":{"row":65,"column":22},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":22},"end":{"row":65,"column":23},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":32},"end":{"row":65,"column":33},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":72,"column":5},"end":{"row":73,"column":0},"action":"insert","lines":["",""]},{"start":{"row":73,"column":0},"end":{"row":73,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":73,"column":4},"end":{"row":74,"column":0},"action":"insert","lines":["",""]},{"start":{"row":74,"column":0},"end":{"row":74,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":4},"end":{"row":74,"column":5},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":5},"end":{"row":74,"column":6},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":6},"end":{"row":74,"column":7},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":7},"end":{"row":74,"column":8},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":8},"end":{"row":74,"column":9},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":9},"end":{"row":74,"column":10},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":10},"end":{"row":74,"column":11},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":10},"end":{"row":74,"column":11},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":11},"end":{"row":74,"column":12},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":12},"end":{"row":74,"column":13},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":13},"end":{"row":74,"column":14},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":14},"end":{"row":74,"column":15},"action":"insert","lines":["D"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":10},"end":{"row":74,"column":15},"action":"remove","lines":["gameD"]},{"start":{"row":74,"column":10},"end":{"row":74,"column":18},"action":"insert","lines":["gameData"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":19},"end":{"row":69,"column":20},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":20},"end":{"row":69,"column":21},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":21},"end":{"row":69,"column":22},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":22},"end":{"row":69,"column":23},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":23},"end":{"row":69,"column":24},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":24},"end":{"row":69,"column":25},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":71,"column":19},"end":{"row":71,"column":25},"action":"insert","lines":["parse."]}]}],[{"group":"doc","deltas":[{"start":{"row":46,"column":25},"end":{"row":50,"column":14},"action":"remove","lines":["","    i = 0","    for grp in groups:","        print(\"elmt \",i,\" : \",grp)","        i += 1"]}]}],[{"group":"doc","deltas":[{"start":{"row":118,"column":13},"end":{"row":119,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":0},"end":{"row":119,"column":1},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":1},"end":{"row":119,"column":2},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":2},"end":{"row":119,"column":3},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":3},"end":{"row":119,"column":4},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":4},"end":{"row":119,"column":5},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":5},"end":{"row":119,"column":6},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":6},"end":{"row":119,"column":7},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":6},"end":{"row":119,"column":7},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":6},"end":{"row":119,"column":7},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":6},"end":{"row":119,"column":7},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":7},"end":{"row":119,"column":8},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":8},"end":{"row":119,"column":9},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":9},"end":{"row":119,"column":10},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":10},"end":{"row":119,"column":11},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":11},"end":{"row":119,"column":12},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":12},"end":{"row":119,"column":13},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":13},"end":{"row":119,"column":14},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":12},"end":{"row":119,"column":14},"action":"remove","lines":["an"]},{"start":{"row":119,"column":12},"end":{"row":119,"column":26},"action":"insert","lines":["analyzeState()"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":25},"end":{"row":119,"column":26},"action":"insert","lines":["\""]},{"start":{"row":119,"column":26},"end":{"row":119,"column":27},"action":"insert","lines":["'"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":27},"end":{"row":119,"column":28},"action":"insert","lines":["\""]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":26},"end":{"row":119,"column":27},"action":"remove","lines":["'"]}]}],[{"group":"doc","deltas":[{"start":{"row":119,"column":26},"end":{"row":119,"column":160},"action":"insert","lines":["STATE20ac18ab-6d18-450e-94af-bee53fdc8fcaIS2;3CELLS:1[2]12'4,2[2]15'2,3[1]33'6;4MOVES:1<5[2]@232'>6[2]@488'>3[1]@4330'2,1<10[1]@2241'3"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["<<<<<<< HEAD",""]},{"start":{"row":6,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["=======",">>>>>>> 13d2f5fac9304aa80dd5abb3758a382122f956b1",""]},{"start":{"row":19,"column":0},"end":{"row":20,"column":0},"action":"remove","lines":["",""]},{"start":{"row":27,"column":0},"end":{"row":28,"column":0},"action":"remove","lines":["",""]},{"start":{"row":29,"column":0},"end":{"row":30,"column":0},"action":"remove","lines":["",""]},{"start":{"row":33,"column":0},"end":{"row":34,"column":0},"action":"remove","lines":["        ",""]},{"start":{"row":34,"column":0},"end":{"row":35,"column":0},"action":"remove","lines":["",""]},{"start":{"row":71,"column":0},"end":{"row":72,"column":0},"action":"remove","lines":["        ",""]},{"start":{"row":74,"column":0},"end":{"row":75,"column":0},"action":"remove","lines":["       ",""]},{"start":{"row":87,"column":0},"end":{"row":88,"column":0},"action":"remove","lines":["        ",""]},{"start":{"row":88,"column":0},"end":{"row":89,"column":0},"action":"remove","lines":["        ",""]},{"start":{"row":91,"column":0},"end":{"row":93,"column":0},"action":"remove","lines":["    ","    ",""]},{"start":{"row":94,"column":0},"end":{"row":95,"column":0},"action":"remove","lines":["    ",""]},{"start":{"row":106,"column":0},"end":{"row":107,"column":0},"action":"insert","lines":["<<<<<<< HEAD",""]},{"start":{"row":111,"column":163},"end":{"row":114,"column":0},"action":"insert","lines":["","=======",">>>>>>> 13d2f5fac9304aa80dd5abb3758a382122f956b1",""]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":0},"end":{"row":113,"column":48},"action":"remove","lines":["=======",">>>>>>> 13d2f5fac9304aa80dd5abb3758a382122f956b1"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":163},"end":{"row":112,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":0},"end":{"row":106,"column":12},"action":"remove","lines":["    ","<<<<<<< HEAD"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":8},"end":{"row":105,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":12},"end":{"row":6,"column":7},"action":"remove","lines":["","","======="]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":2,"column":12},"action":"remove","lines":["","<<<<<<< HEAD"]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":12},"end":{"row":4,"column":48},"action":"remove","lines":["",">>>>>>> 13d2f5fac9304aa80dd5abb3758a382122f956b1"]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":12},"end":{"row":4,"column":0},"action":"insert","lines":["",""]}]}]]},"ace":{"folds":[],"scrolltop":1380,"scrollleft":0,"selection":{"start":{"row":4,"column":0},"end":{"row":4,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":85,"state":"start","mode":"ace/mode/python"}},"timestamp":1418812922787}